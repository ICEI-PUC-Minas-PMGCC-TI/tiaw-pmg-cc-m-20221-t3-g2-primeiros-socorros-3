<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Primeiros socorros</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    <link rel="stylesheet" href="style-conteudo.css">
    <script src="script-informacoes.js"></script>
</head>
<body>
    <main>
        <header class="container header">
            <div class="row">
                <div class="col-12 header_area">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-4 col-lg-2">
                    <img title="logo_imagem" src="img/logo.png" class="logo">
                         </div>
                         
                         <div class="col-12 col-sm-12 col-md-8 col-lg-10 menu_area">
                    <nav class="nav nav-pills flex-column flex-sm-row">
                        <a class="flex-sm-fill text-sm-center nav-link" href="index.html">Home</a>
                        <a class="flex-sm-fill text-sm-center nav-link" href="login.html">Login</a>
                        <a class="flex-sm-fill text-sm-center nav-link" href="cadastro.html">Cadastro</a>
                        <a class="flex-sm-fill text-sm-center nav-link active" href="conteudo.html">Conteúdo</a>
                      </nav>
                    </div>
        
                </div>
            </div>
        </header>

        <section class="py-5 text-center container">
          <div class="row py-lg-5" id="titulo">
            <div class="col-lg-6 col-md-8 mx-auto">
              <h1 class="fw-light">Conteúdo disponível para acidentes com idosos</h1>
              <p class="lead text-muted">De acordo com o Ministério da Saúde, 75% dos acidentes com idosos acontecem dentro das próprias casas.</p>
              <p>
                <a href="cadastro.html" class="btn btn-primary   my-2">Fazer Cadastro</a>
                <a href="login.html"    class="btn btn-secondary my-2">Fazer Login   </a>
              </p>
            </div>
          </div>
        </section>
      
        <div class="album py-5 bg-light">
          <div class="container">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

            </div>
                
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3" id="infoInicial"></div>
          </div>
        </div>

            <div class="btn-group">
              <a href = "informacoes-cadastro.html" id="cadastro_info" type="button" class="btn btn-primary   my-2"" >Cadastre novas publicações</a>
            </div>

          </div>
        </div>
      
      </main>

      <footer>
        <div class="row">
            <div class="col-12 footer_area">
               Portal Primeiros Socorros - Todos os direitos reservados - 2022
            </div>
        </div>
      </footer>

      <script>
        // variaveis para calcular numero de publicacoes de cada tipo de acidente
        var avc        = 0;
        let choque     = 0;
        let convulsao  = 0;
        let desmaio    = 0;
        let engasgo    = 0;
        let fratura    = 0;
        let infarto    = 0;
        let queda      = 0;
        let queimadura = 0;

        
        // passar por todas as informacoes cadastradas
        for (i=0; i < db.data.length; i++) 
        {
          let tipo = db.data[i].tipo;
          
          // contar publicacoes 
          // alterar para switch ( ? )
          if      ( tipo == 1 ) avc        = avc+1;
          else if ( tipo == 2 ) choque     = choque+1;
          else if ( tipo == 3 ) convulsao  = convulsao+1;
          else if ( tipo == 4 ) desmaio    = desmaio+1;
          else if ( tipo == 5 ) engasgo    = engasgo+1;
          else if ( tipo == 6 ) fratura    = fratura+1;
          else if ( tipo == 7 ) infarto    = infarto+1;
          else if ( tipo == 8 ) queda      = queda+1;
          else if ( tipo == 9 ) queimadura = queimadura+1;
        } 

        let texto = '';
        let qntd  = 0;
        let tmp = 0;
        let conteudo;
        for (i=0; i < db_conteudo_inicial.dados.length; i++) 
        {
            conteudo = db_conteudo_inicial.dados[i];
            tmp      = conteudo.nome;
            qntd     = parseInt(tmp);

            texto += `
            <div class="col">
              <div class="infoInicial" >
              <div class="card shadow-sm">
               <img title="${conteudo.nome}_imagem"src="img/${conteudo.nome}.jpg">
               <div class="card-body">
                 <p class="card-text">${conteudo.texto}</p>
               <div class="d-flex justify-content-between align-items-center">
                 <div class="btn-group">
                 <a href = "conteudo-principal.html?id=${conteudo.id}" type="button" class="btn btn-sm btn-outline-secondary" >Acessar aula</a>
               </div>
               <div class= "text-muted">
                <small> ${tmp} publicações </small>
                </div>
               </div>
               </div>
             </div>
             </div>
            </div>`;
        }
        document.getElementById('infoInicial').innerHTML=texto;
    </script>

</body>
</html>